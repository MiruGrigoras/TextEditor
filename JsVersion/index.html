<!DOCTYPE html>

<link rel="stylesheet" href="style.css" />

<script>
  let textBeforeCursor = '';
  window.addEventListener('click', function(e){   
    if (document.getElementById('container').contains(e.target)){
      document.getElementById('cursor').style.visibility = 'visible';
    } else {
      document.getElementById('cursor').style.visibility = 'hidden';
    }
  });

  window.addEventListener('keydown', function(e){  
    e.preventDefault();
    switch (e.key){
      case 'Enter':
        textBeforeCursor += '\n';
        document.getElementById("textBeforeCursor").innerHTML += "<br />";
        break;
      default: 
        textBeforeCursor += e.key;
        const textElem = document.getElementById("textBeforeCursor");
        const containerElem = document.getElementById("container");
        textElem.innerHTML += e.key; 
        if(textElem.getBoundingClientRect().width > containerElem.clientWidth - 10){ //-10 because 5px padding left and right
          textElem.innerHTML = textElem.innerHTML.slice(0, -1);;
          textElem.innerHTML += "<br />";
          textElem.innerHTML += e.key; 
        }
          
    }
  });

</script>

<html>
  <body>
    <div class="container" id="container">
      <span id="textBeforeCursor"></span>
      <span class="cursor" id="cursor"></span>
    </div>
  </body>
</html>
